import{c as T}from"./chunk-QLEZDMIK.mjs";import{a as In,b as m,d as V,e as Q,f as _n,g as xn,h as vn,i as it,j as Bn,l as Kn,m as Un,n as En,o as Fn,p as kn,q as Mn,r as Rn,s as d,t as Gn}from"./chunk-IMYNN4TW.mjs";import{a as Tn,b as N,c as Pn}from"./chunk-IM4O756A.mjs";import{a as Cn}from"./chunk-2SAOCLIU.mjs";import{b as Sn,g as bn}from"./chunk-ZOY6N6UM.mjs";import{a as hn,c as l}from"./chunk-KBC4ECVP.mjs";import{d as fn,e as gn,f as An,g as pn,i as yn,j as ln,k as mn,u as wn}from"./chunk-VHNX2NUR.mjs";import{a as dn}from"./chunk-X5UJYMJU.mjs";import{a as E}from"./chunk-MY2BEHYF.mjs";import{a as W,b as un}from"./chunk-YMXJ6GYE.mjs";import{a as cn}from"./chunk-MZVVBJVV.mjs";import{d as an}from"./chunk-5WWU3WSU.mjs";import{a as en}from"./chunk-AEGA5N2W.mjs";import{a as h}from"./chunk-OSZWSLJA.mjs";import{a as rn}from"./chunk-SCLWOTHD.mjs";import{b as et,c as on,d as ot,e as rt,f as q}from"./chunk-XFL3B4WZ.mjs";import{a as sn}from"./chunk-T3VLXADE.mjs";import{a as Yt,c as tn,d as nn}from"./chunk-M2GGYCLU.mjs";import{c as jt,d as zt,e as Ht,f as nt,g as Xt,h as Jt,i as Zt}from"./chunk-36H47QOE.mjs";import{b as Dt,c as U,d as Ot,e as qt,f as Wt,g as Nt,h as Vt,i as Qt,m as y,n as Lt}from"./chunk-LET633ZK.mjs";import{a as $t}from"./chunk-LS3IDL2N.mjs";import{a as Rt,b as D,c as Gt,d as O,e as Y,f as tt}from"./chunk-6VGLRQBT.mjs";import{a as Mt}from"./chunk-AIPHJFJL.mjs";import{b as Ft,c as kt}from"./chunk-X6H4G6NE.mjs";import{a as B,b as K}from"./chunk-6KI24ZRR.mjs";import{a as St,b as bt}from"./chunk-JNNFNYDO.mjs";import{a as v}from"./chunk-553ZRNUL.mjs";import{i as C,j as Z}from"./chunk-SZU5Q6CF.mjs";import{b as Tt,c as Pt,d as Ct}from"./chunk-7OUPEQRN.mjs";import{a as Et}from"./chunk-YOZBVVKL.mjs";import{c as J}from"./chunk-2P27DDVV.mjs";import{a as $}from"./chunk-TTY5GFMN.mjs";import{c as Bt,f as Kt,g as Ut}from"./chunk-JLZGYZBX.mjs";import{a as xt}from"./chunk-BMPHQ3E7.mjs";import{g as H}from"./chunk-4RXKALLC.mjs";import{e as vt}from"./chunk-X5ORWYVO.mjs";import{b as It,c as _t,e as X}from"./chunk-RJ7F4JDV.mjs";import{a as R}from"./chunk-RIINVEZA.mjs";import{a as g,c as ht,d as p}from"./chunk-HHWJHOFZ.mjs";import{a as G,b as x,c as pt,d as yt,e as lt,f as mt,g as wt}from"./chunk-TKXEVD7A.mjs";import{a as At}from"./chunk-ZD2TY5N3.mjs";import{j as w}from"./chunk-CU6HQJSE.mjs";import{b as u}from"./chunk-LQOSHBB7.mjs";import{a as P}from"./chunk-3OLFJ65O.mjs";import{b as z}from"./chunk-VHY6ZATX.mjs";import{sha3_256 as Yn}from"@noble/hashes/sha3";async function L(t){if(Rn(t))return ee(t);let{moduleAddress:n,moduleName:e,functionName:o}=w(t.function),r=await Wn({key:"entry-function",moduleAddress:n,moduleName:e,functionName:o,aptosConfig:t.aptosConfig,abi:t.abi,fetch:$n});return te({...t,abi:r})}function te(t){let n=t.abi,{moduleAddress:e,moduleName:o,functionName:r}=w(t.function),i=b(t.typeArguments);if(i.length!==n.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${n.typeParameters.length}, received ${i.length}`);let s=t.functionArguments.map((c,A)=>I(t.function,n,c,A,i));if(s.length!==n.parameters.length)throw new Error(`Too few arguments for '${e}::${o}::${r}', expected ${n.parameters.length} but got ${s.length}`);let a=nt.build(`${e}::${o}`,r,i,s);if("multisigAddress"in t){let c=u.from(t.multisigAddress);return new Ht(new Jt(c,new Zt(a)))}return new zt(a)}async function We(t){let{moduleAddress:n,moduleName:e,functionName:o}=w(t.function),r=await Wn({key:"view-function",moduleAddress:n,moduleName:e,functionName:o,aptosConfig:t.aptosConfig,abi:t.abi,fetch:Dn});return ne({abi:r,...t})}function ne(t){let n=t.abi,{moduleAddress:e,moduleName:o,functionName:r}=w(t.function),i=b(t.typeArguments);if(i.length!==n.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${n.typeParameters.length}, received ${i.length}`);let s=t?.functionArguments?.map((a,c)=>I(t.function,n,a,c,i))??[];if(s.length!==n.parameters.length)throw new Error(`Too few arguments for '${e}::${o}::${r}', expected ${n.parameters.length} but got ${s.length}`);return nt.build(`${e}::${o}`,r,i,s)}function ee(t){return new jt(new Xt(z.fromHexInput(t.bytecode).toUint8Array(),b(t.typeArguments),t.functionArguments))}async function oe(t){let{aptosConfig:n,sender:e,payload:o,options:r,feePayerAddress:i}=t,s=async()=>H[n.network]?{chainId:H[n.network]}:{chainId:(await hn({aptosConfig:n})).chain_id},a=async()=>r?.gasUnitPrice?{gasEstimate:r.gasUnitPrice}:{gasEstimate:(await Sn({aptosConfig:n})).gas_estimate},c=async()=>{let M=async()=>r?.accountSequenceNumber!==void 0?r.accountSequenceNumber:(await N({aptosConfig:n,accountAddress:e})).sequence_number;if(i&&u.from(i).equals(u.ZERO))try{return await M()}catch{return 0}else return M()},[{chainId:A},{gasEstimate:f},_]=await Promise.all([s(),a(),c()]),{maxGasAmount:Xn,gasUnitPrice:Jn,expireTimestamp:Zn}={maxGasAmount:r?.maxGasAmount?BigInt(r.maxGasAmount):BigInt(2e5),gasUnitPrice:r?.gasUnitPrice??BigInt(f),expireTimestamp:r?.expireTimestamp??BigInt(Math.floor(Date.now()/1e3)+20)};return new Yt(u.from(e),BigInt(_),o,BigInt(Xn),BigInt(Jn),BigInt(Zn),new $t(A))}async function st(t){let{aptosConfig:n,sender:e,payload:o,options:r,feePayerAddress:i}=t,s=await oe({aptosConfig:n,sender:e,payload:o,options:r,feePayerAddress:i});if("secondarySignerAddresses"in t){let a=t.secondarySignerAddresses?.map(c=>u.from(c))??[];return new sn(s,a,t.feePayerAddress?u.from(t.feePayerAddress):void 0)}return new rn(s,t.feePayerAddress?u.from(t.feePayerAddress):void 0)}function On(t){let{signerPublicKey:n,transaction:e,secondarySignersPublicKeys:o,feePayerPublicKey:r}=t,i=S(n);if(e.feePayerAddress){let a=new nn(e.rawTransaction,e.secondarySignerAddresses??[],e.feePayerAddress),c=[];e.secondarySignerAddresses&&(o?c=o.map(_=>S(_)):c=Array.from({length:e.secondarySignerAddresses.length},()=>S(void 0)));let A=S(r),f=new rt(i,e.secondarySignerAddresses??[],c,{address:e.feePayerAddress,authenticator:A});return new h(a.raw_txn,f).bcsToBytes()}if(e.secondarySignerAddresses){let a=new tn(e.rawTransaction,e.secondarySignerAddresses),c=[];o?c=o.map(f=>S(f)):c=Array.from({length:e.secondarySignerAddresses.length},()=>S(void 0));let A=new ot(i,e.secondarySignerAddresses,c);return new h(a.raw_txn,A).bcsToBytes()}let s;if(i instanceof D)s=new et(i.public_key,i.signature);else if(i instanceof O||i instanceof Y)s=new q(i);else if(i instanceof tt)s=new q(i);else throw new Error("Invalid public key");return new h(e.rawTransaction,s).bcsToBytes()}function S(t){if(!t)return new tt;let e=C.isInstance(t)||v.isInstance(t)||St.isInstance(t)?new B(t):t,o=new Ct(new Uint8Array(64));if(Tt.isInstance(e))return new D(e,o);if(B.isInstance(e))return C.isInstance(e.publicKey)?new O(e,new K(Z.getSimulationSignature())):new O(e,new K(o));if(Ft.isInstance(e))return new Y(e,new kt({signatures:e.publicKeys.map(r=>C.isInstance(r.publicKey)||v.isInstance(r.publicKey)?new K(Z.getSimulationSignature()):new K(o)),bitmap:e.createBitmap({bits:Array(e.publicKeys.length).fill(0).map((r,i)=>i)})}));throw new Error("Unsupported PublicKey used for simulations")}function at(t){let{transaction:n,feePayerAuthenticator:e,additionalSignersAuthenticators:o}=t,r=xt(Rt,t.senderAuthenticator),i;if(n.feePayerAddress){if(!e)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");i=new rt(r,n.secondarySignerAddresses??[],o??[],{address:n.feePayerAddress,authenticator:e})}else if(n.secondarySignerAddresses){if(!o)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");i=new ot(r,n.secondarySignerAddresses,o)}else r instanceof D?i=new et(r.public_key,r.signature):r instanceof Gt?i=new on(r.public_key,r.signature):i=new q(r);return new h(n.rawTransaction,i).bcsToBytes()}function qn(t){let n=Yn.create();for(let e of t)n.update(e);return n.digest()}var re=qn(["APTOS::Transaction"]);function Ne(t){let n=at(t);return new z(qn([re,new Uint8Array([0]),n])).toString()}async function Wn({key:t,moduleAddress:n,moduleName:e,functionName:o,aptosConfig:r,abi:i,fetch:s}){return i!==void 0?i:Et(async()=>s(n,e,o,r),`${t}-${r.network}-${n}-${e}-${o}`,1e3*60*5)()}import{ScriptComposerWasm as ct}from"@aptos-labs/script-composer-pack";var Nn=class t{constructor(n){this.config=n,this.builder=void 0}async init(){if(!t.transactionComposer){let n=await import("@aptos-labs/script-composer-pack"),{TransactionComposer:e,initSync:o}=n;ct.isInitialized||ct.init(),o({module:ct.wasm}),t.transactionComposer=e}this.builder=t.transactionComposer.single_signer()}async addBatchedCalls(n){let{moduleAddress:e,moduleName:o,functionName:r}=w(n.function),i=this.config.getRequestUrl("Fullnode");if(await this.builder.load_module(i,`${e}::${o}`),n.typeArguments!==void 0)for(let f of n.typeArguments)await this.builder.load_type_tag(i,f.toString());let s=b(n.typeArguments),a=await ut(e,o,this.config);if(!a)throw new Error(`Could not find module ABI for '${e}::${o}'`);let c=a?.exposed_functions.find(f=>f.name===r);if(!c)throw new Error(`Could not find function ABI for '${e}::${o}::${r}'`);if(s.length!==c.generic_type_params.length)throw new Error(`Type argument count mismatch, expected ${c?.generic_type_params.length}, received ${s.length}`);let A=n.functionArguments.map((f,_)=>f instanceof P?f:P.newBytes(I(r,a,f,_,s,{allowUnknownStructs:!0}).bcsToBytes()));return this.builder.add_batched_call(`${e}::${o}`,r,s.map(f=>f.toString()),A)}build(){return this.builder.generate_batched_calls(!0)}};async function F(t){let n=await ie(t);return se(t,n)}async function ie(t){let{aptosConfig:n,data:e}=t,o,r;return"bytecode"in e?r=await L(e):"multisigAddress"in e?(o={aptosConfig:n,multisigAddress:e.multisigAddress,function:e.function,functionArguments:e.functionArguments,typeArguments:e.typeArguments,abi:e.abi},r=await L(o)):(o={aptosConfig:n,function:e.function,functionArguments:e.functionArguments,typeArguments:e.typeArguments,abi:e.abi},r=await L(o)),r}async function se(t,n){let{aptosConfig:e,sender:o,options:r}=t,i;if(ae(t)&&(i=u.ZERO.toString()),ce(t)){let{secondarySignerAddresses:s}=t;return st({aptosConfig:e,sender:o,payload:n,options:r,secondarySignerAddresses:s,feePayerAddress:i})}return st({aptosConfig:e,sender:o,payload:n,options:r,feePayerAddress:i})}function ae(t){return t.withFeePayer===!0}function ce(t){return"secondarySignerAddresses"in t}function xo(t){let{transaction:n}=t;return an(n)}function Vn(t){let{signer:n,transaction:e}=t;return n.signTransactionWithAuthenticator(e)}function Qn(t){let{signer:n,transaction:e}=t;if(!e.feePayerAddress)throw new Error(`Transaction ${e} is not a Fee Payer transaction`);return e.feePayerAddress=n.accountAddress,Vn({signer:n,transaction:e})}async function vo(t){let{aptosConfig:n,transaction:e,signerPublicKey:o,secondarySignersPublicKeys:r,feePayerPublicKey:i,options:s}=t,a=On({transaction:e,signerPublicKey:o,secondarySignersPublicKeys:r,feePayerPublicKey:i,options:s}),{data:c}=await J({aptosConfig:n,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:t.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:t.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:t.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return c}async function Ln(t){let{aptosConfig:n}=t,e=at({...t});try{let{data:o}=await J({aptosConfig:n,body:e,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return o}catch(o){let r=h.deserialize(new At(e));throw r.authenticator.isSingleSender()&&r.authenticator.sender.isSingleKey()&&(r.authenticator.sender.public_key.publicKey instanceof C||r.authenticator.sender.public_key.publicKey instanceof v)&&await un.fetchJWK({aptosConfig:n,publicKey:r.authenticator.sender.public_key.publicKey,kid:r.authenticator.sender.signature.signature.getJwkKid()}),o}}async function j(t){let{aptosConfig:n,signer:e,feePayer:o,transaction:r}=t;W(e)&&await e.checkKeylessAccountValidity(n),W(o)&&await o.checkKeylessAccountValidity(n);let i=t.feePayerAuthenticator||o&&Qn({signer:o,transaction:r}),s=Vn({signer:e,transaction:r});return Ln({aptosConfig:n,transaction:r,senderAuthenticator:s,feePayerAuthenticator:i})}async function Bo(t){let{aptosConfig:n,senderAuthenticator:e,feePayer:o,transaction:r}=t;W(o)&&await o.checkKeylessAccountValidity(n);let i=Qn({signer:o,transaction:r});return Ln({aptosConfig:n,transaction:r,senderAuthenticator:e,feePayerAuthenticator:i})}var ue={typeParameters:[],parameters:[y.u8(),new y(y.u8())]};async function Ko(t){let{aptosConfig:n,account:e,metadataBytes:o,moduleBytecode:r,options:i}=t,s=r.map(a=>g.U8(a));return F({aptosConfig:n,sender:u.from(e),data:{function:"0x1::code::publish_package_txn",functionArguments:[g.U8(o),new g(s)],abi:ue},options:i})}async function zn(t){return N(t)}async function Jo(t){return Tn(t)}async function Hn(t){return Pn(t)}async function Zo(t){let{aptosConfig:n,accountAddress:e,options:o}=t;return Kt({aptosConfig:n,originMethod:"getTransactions",path:`accounts/${u.from(e).toString()}/transactions`,params:{start:o?.offset,limit:o?.limit}})}async function Yo(t){let{aptosConfig:n,accountAddress:e,options:o}=t;return Ut({aptosConfig:n,originMethod:"getResources",path:`accounts/${u.from(e).toString()}/resources`,params:{ledger_version:o?.ledgerVersion,offset:o?.offset,limit:o?.limit??999}})}async function de(t){let{aptosConfig:n,accountAddress:e,resourceType:o,options:r}=t,{data:i}=await Bt({aptosConfig:n,originMethod:"getResource",path:`accounts/${u.from(e).toString()}/resource/${o}`,params:{ledger_version:r?.ledgerVersion}});return i.data}async function fe(t){let{aptosConfig:n,authenticationKey:e,options:o}=t,r=await de({aptosConfig:n,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:o}),{address_map:{handle:i}}=r,s=u.from(e);try{let a=await Cn({aptosConfig:n,handle:i,data:{key:s.toString(),key_type:"address",value_type:"address"},options:o});return u.from(a)}catch(a){if(a instanceof vt&&a.data.error_code==="table_item_not_found")return s;throw a}}async function tr(t){let{aptosConfig:n,accountAddress:e}=t,r={owner_address:{_eq:u.from(e).toStringLong()},amount:{_gt:0}},s=await l({aptosConfig:n,query:{query:ln,variables:{where_condition:r}},originMethod:"getAccountTokensCount"});return s.current_token_ownerships_v2_aggregate.aggregate?s.current_token_ownerships_v2_aggregate.aggregate.count:0}async function nr(t){let{aptosConfig:n,accountAddress:e,options:o}=t,i={owner_address:{_eq:u.from(e).toStringLong()},amount:{_gt:0}};o?.tokenStandard&&(i.token_standard={_eq:o?.tokenStandard});let s={query:pn,variables:{where_condition:i,offset:o?.offset,limit:o?.limit,order_by:o?.orderBy}};return(await l({aptosConfig:n,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function er(t){let{aptosConfig:n,accountAddress:e,collectionAddress:o,options:r}=t,i=u.from(e).toStringLong(),s=u.from(o).toStringLong(),a={owner_address:{_eq:i},current_token_data:{collection_id:{_eq:s}},amount:{_gt:0}};r?.tokenStandard&&(a.token_standard={_eq:r?.tokenStandard});let c={query:yn,variables:{where_condition:a,offset:r?.offset,limit:r?.limit,order_by:r?.orderBy}};return(await l({aptosConfig:n,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function or(t){let{aptosConfig:n,accountAddress:e,options:o}=t,i={owner_address:{_eq:u.from(e).toStringLong()}};o?.tokenStandard&&(i.current_collection={token_standard:{_eq:o?.tokenStandard}});let s={query:An,variables:{where_condition:i,offset:o?.offset,limit:o?.limit,order_by:o?.orderBy}};return(await l({aptosConfig:n,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function rr(t){let{aptosConfig:n,accountAddress:e}=t,o=u.from(e).toStringLong(),i=await l({aptosConfig:n,query:{query:mn,variables:{address:o}},originMethod:"getAccountTransactionsCount"});return i.account_transactions_aggregate.aggregate?i.account_transactions_aggregate.aggregate.count:0}async function ir(t){let{aptosConfig:n,accountAddress:e,coinType:o,faMetadataAddress:r}=t,i=o,s;if(o!==void 0&&r!==void 0)s=u.from(r).toStringLong();else if(o!==void 0&&r===void 0)o===X?s=u.A.toStringLong():s=Mt(u.A,o).toStringLong();else if(o===void 0&&r!==void 0){let f=u.from(r);s=f.toStringLong(),f===u.A&&(i=X)}else throw new Error("Either coinType, fungibleAssetAddress, or both must be provided");let a=u.from(e).toStringLong(),c={asset_type:{_eq:s}};i!==void 0&&(c={asset_type:{_in:[i,s]}});let A=await ge({aptosConfig:n,accountAddress:a,options:{where:c}});return A[0]?A[0].amount:0}async function ge(t){let{aptosConfig:n,accountAddress:e,options:o}=t,r=u.from(e).toStringLong(),i={...o?.where,owner_address:{_eq:r}},s={query:gn,variables:{where_condition:i,offset:o?.offset,limit:o?.limit,order_by:o?.orderBy}};return(await l({aptosConfig:n,query:s,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances}async function sr(t){let{aptosConfig:n,accountAddress:e}=t,o=u.from(e).toStringLong(),i=await l({aptosConfig:n,query:{query:fn,variables:{address:o}},originMethod:"getAccountCoinsCount"});if(!i.current_fungible_asset_balances_aggregate.aggregate)throw Error("Failed to get the count of account coins");return i.current_fungible_asset_balances_aggregate.aggregate.count}async function ar(t){let{aptosConfig:n,accountAddress:e,options:o}=t,i={owner_address:{_eq:u.from(e).toStringLong()}},s={query:wn,variables:{where_condition:i,offset:o?.offset,limit:o?.limit,order_by:o?.orderBy}};return(await l({aptosConfig:n,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function cr(t){let{aptosConfig:n,privateKey:e}=t,o=new B(e.publicKey());if(e instanceof bt){let i=$.fromPublicKey({publicKey:o}).derivedAddress();return E.fromPrivateKey({privateKey:e,address:i})}if(e instanceof Pt){let r=$.fromPublicKey({publicKey:o});if(await jn({authKey:r,aptosConfig:n})){let c=r.derivedAddress();return E.fromPrivateKey({privateKey:e,address:c,legacy:!1})}let s=$.fromPublicKey({publicKey:o.publicKey});if(await jn({authKey:s,aptosConfig:n})){let c=s.derivedAddress();return E.fromPrivateKey({privateKey:e,address:c,legacy:!0})}}throw new Error(`Can't derive account from private key ${e}`)}async function jn(t){let{aptosConfig:n,authKey:e}=t,o=await fe({aptosConfig:n,authenticationKey:e.derivedAddress()});try{return await zn({aptosConfig:n,accountAddress:o}),!0}catch(r){if(r.status===404)return!1;throw new Error(`Error while looking for an account info ${o.toString()}`)}}var Ae={typeParameters:[],parameters:[new U,y.u8(),new U,y.u8(),y.u8(),y.u8()]};async function ur(t){let{aptosConfig:n,fromAccount:e,dangerouslySkipVerification:o}=t;if("toNewPrivateKey"in t)return dt({aptosConfig:n,fromAccount:e,toNewPrivateKey:t.toNewPrivateKey});let r;if("toAccount"in t){if(t.toAccount instanceof cn)return dt({aptosConfig:n,fromAccount:e,toNewPrivateKey:t.toAccount.privateKey});if(t.toAccount instanceof dn)return dt({aptosConfig:n,fromAccount:e,toAccount:t.toAccount});r=t.toAccount.publicKey.authKey()}else if("toAuthKey"in t)r=t.toAuthKey;else throw new Error("Invalid arguments");let i=await ye({aptosConfig:n,fromAccount:e,toAuthKey:r});if(o===!0)return i;let s=await bn({aptosConfig:n,transactionHash:i.hash});if(!s.success)throw new Error(`Failed to rotate authentication key - ${s}`);let a=await F({aptosConfig:n,sender:e.accountAddress,data:{function:"0x1::account::set_originating_address",functionArguments:[]}});return j({aptosConfig:n,signer:t.toAccount,transaction:a})}async function dt(t){let{aptosConfig:n,fromAccount:e}=t,o=await zn({aptosConfig:n,accountAddress:e.accountAddress}),r;"toNewPrivateKey"in t?r=E.fromPrivateKey({privateKey:t.toNewPrivateKey,legacy:!0}):r=t.toAccount;let s=new en({sequenceNumber:BigInt(o.sequence_number),originator:e.accountAddress,currentAuthKey:u.from(o.authentication_key),newPublicKey:r.publicKey}).bcsToBytes(),a=e.sign(s),c=r.sign(s),A=await F({aptosConfig:n,sender:e.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new x(e.signingScheme),g.U8(e.publicKey.toUint8Array()),new x(r.signingScheme),g.U8(r.publicKey.toUint8Array()),g.U8(a.toUint8Array()),g.U8(c.toUint8Array())],abi:Ae}});return j({aptosConfig:n,signer:e,transaction:A})}var pe={typeParameters:[],parameters:[y.u8()]};async function ye(t){let{aptosConfig:n,fromAccount:e,toAuthKey:o}=t,r=o,i=await F({aptosConfig:n,sender:e.accountAddress,data:{function:"0x1::account::rotate_authentication_key_call",functionArguments:[g.U8(r.toUint8Array())],abi:pe}});return j({aptosConfig:n,signer:e,transaction:i})}var le=new TextEncoder;function b(t){return t?.map(n=>m(n)?T(n):n)??[]}async function ut(t,n,e){return(await Hn({aptosConfig:e,accountAddress:t,moduleName:n})).abi}async function gt(t,n,e,o){let r=await ut(t,n,o);if(!r)throw new Error(`Could not find module ABI for '${t}::${n}'`);return r.exposed_functions.find(i=>i.name===e)}async function Pr(t,n,e,o){let r=await gt(t,n,e,o);if(!r)throw new Error(`Could not find function ABI for '${t}::${n}::${e}'`);let i=[];for(let s=0;s<r.params.length;s+=1)i.push(T(r.params[s],{allowGenerics:!0}));return{typeParameters:r.generic_type_params,parameters:i}}async function $n(t,n,e,o){let r=await gt(t,n,e,o);if(!r)throw new Error(`Could not find entry function ABI for '${t}::${n}::${e}'`);if(!r.is_entry)throw new Error(`'${t}::${n}::${e}' is not an entry function`);let i=Gn(r),s=[];for(let a=i;a<r.params.length;a+=1)s.push(T(r.params[a],{allowGenerics:!0}));return{signers:i,typeParameters:r.generic_type_params,parameters:s}}async function Dn(t,n,e,o){let r=await gt(t,n,e,o);if(!r)throw new Error(`Could not find view function ABI for '${t}::${n}::${e}'`);if(!r.is_view)throw new Error(`'${t}::${n}::${e}' is not an view function`);let i=[];for(let a=0;a<r.params.length;a+=1)i.push(T(r.params[a],{allowGenerics:!0}));let s=[];for(let a=0;a<r.return.length;a+=1)s.push(T(r.return[a],{allowGenerics:!0}));return{typeParameters:r.generic_type_params,parameters:i,returnTypes:s}}function Cr(t,n,e,o,r){return t instanceof P?t:P.newBytes(I(n,e,t,o,r).bcsToBytes())}function I(t,n,e,o,r,i){let s;if("exposed_functions"in n){let a=n.exposed_functions.find(c=>c.name===t);if(!a)throw new Error(`Could not find function ABI for '${n.address}::${n.name}::${t}'`);if(o>=a.params.length)throw new Error(`Too many arguments for '${t}', expected ${a.params.length}`);s=T(a.params[o],{allowGenerics:!0})}else{if(o>=n.parameters.length)throw new Error(`Too many arguments for '${t}', expected ${n.parameters.length}`);s=n.parameters[o]}return k(e,s,o,r,"exposed_functions"in n?n:void 0,i)}function k(t,n,e,o,r,i){return xn(t)?(ft(n,t,e),t):me(t,n,e,o,r,i)}function me(t,n,e,o,r,i){if(n.isBool()){if(In(t))return new G(t);if(m(t)){if(t==="true")return new G(!0);if(t==="false")return new G(!1)}d("boolean",e)}if(n.isAddress()){if(m(t))return u.fromString(t);d("string | AccountAddress",e)}if(n.isU8()){let s=V(t);if(s!==void 0)return new x(s);d("number | string",e)}if(n.isU16()){let s=V(t);if(s!==void 0)return new pt(s);d("number | string",e)}if(n.isU32()){let s=V(t);if(s!==void 0)return new yt(s);d("number | string",e)}if(n.isU64()){if(Q(t))return new lt(BigInt(t));d("bigint | number | string",e)}if(n.isU128()){if(Q(t))return new mt(BigInt(t));d("bigint | number | string",e)}if(n.isU256()){if(Q(t))return new wt(BigInt(t));d("bigint | number | string",e)}if(n.isGeneric()){let s=n.value;if(s<0||s>=o.length)throw new Error(`Generic argument ${n.toString()} is invalid for argument ${e}`);return k(t,o[s],e,o,r)}if(n.isVector()){if(n.value.isU8()){if(m(t))return g.U8(le.encode(t));if(t instanceof Uint8Array)return g.U8(t);if(t instanceof ArrayBuffer)return g.U8(new Uint8Array(t))}if(m(t)&&t.startsWith("["))return k(JSON.parse(t),n,e,o);if(Array.isArray(t))return new g(t.map(s=>k(s,n.value,e,o,r)));throw new Error(`Type mismatch for argument ${e}, type '${n.toString()}'`)}if(n.isStruct()){if(n.isString()){if(m(t))return new ht(t);d("string",e)}if(n.isObject()){if(m(t))return u.fromString(t);d("string | AccountAddress",e)}if(n.isDelegationKey()||n.isRateLimiter()){if(t instanceof Uint8Array)return new R(t);d("Uint8Array",e)}if(n.isOption()){if(_n(t)){let a=n.value.typeArgs[0];return a instanceof Dt?new p(null):a instanceof Qt?new p(null):a instanceof U?new p(null):a instanceof Ot?new p(null):a instanceof qt?new p(null):a instanceof Wt?new p(null):a instanceof Nt?new p(null):a instanceof Vt?new p(null):new p(null)}return new p(k(t,n.value.typeArgs[0],e,o,r))}if(r?.structs.find(a=>a.name===n.value.name.identifier)?.fields.length===0&&t instanceof Uint8Array)return new R(t);if(t instanceof Uint8Array&&i?.allowUnknownStructs)return console.warn(`Unsupported struct input type for argument ${e}. Continuing since 'allowUnknownStructs' is enabled.`),new R(t);throw new Error(`Unsupported struct input type for argument ${e}, type '${n.toString()}'`)}throw new Error(`Type mismatch for argument ${e}, type '${n.toString()}'`)}function ft(t,n,e){if(t.isBool()){if(vn(n))return;d("Bool",e)}if(t.isAddress()){if(it(n))return;d("AccountAddress",e)}if(t.isU8()){if(Kn(n))return;d("U8",e)}if(t.isU16()){if(Un(n))return;d("U16",e)}if(t.isU32()){if(En(n))return;d("U32",e)}if(t.isU64()){if(Fn(n))return;d("U64",e)}if(t.isU128()){if(kn(n))return;d("U128",e)}if(t.isU256()){if(Mn(n))return;d("U256",e)}if(t.isVector()){if(n instanceof g){n.values.length>0&&ft(t.value,n.values[0],e);return}d("MoveVector",e)}if(t instanceof Lt){if(t.isString()){if(Bn(n))return;d("MoveString",e)}if(t.isObject()){if(it(n))return;d("AccountAddress",e)}if(t.isOption()){if(n instanceof p){n.value!==void 0&&ft(t.value.typeArgs[0],n.value,e);return}d("MoveOption",e)}}throw new Error(`Type mismatch for argument ${e}, expected '${t.toString()}'`)}export{b as a,ut as b,gt as c,Pr as d,$n as e,Dn as f,Cr as g,I as h,k as i,L as j,te as k,We as l,ne as m,oe as n,st as o,On as p,S as q,at as r,qn as s,Ne as t,Nn as u,F as v,ie as w,se as x,xo as y,Vn as z,Qn as A,vo as B,Ln as C,j as D,Bo as E,Ko as F,zn as G,Jo as H,Hn as I,Zo as J,Yo as K,de as L,fe as M,tr as N,nr as O,er as P,or as Q,rr as R,ir as S,ge as T,sr as U,ar as V,cr as W,jn as X,ur as Y};
//# sourceMappingURL=chunk-HWNPKEOJ.mjs.map